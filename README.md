# StudentNFT API

This repository includes an API that interacts with the [Registree smart contract](https://github.com/registreerocks/studentNFT), deployed on Rinkeby, to make it compatible with web 2.0 applications. 
All endpoints are secured by Bearer Authentication, the Json Web Tokens are generated by [Auth0](https://auth0.com/).
The API is built using [Connexion](https://github.com/zalando/connexion), the first framework for Python to implement [OpenAPI](https://swagger.io/docs/specification/about/). It is served via [gunicorn](https://gunicorn.org/) and watched by [supervisor](http://supervisord.org/).

## Preparation

1. Clone the repository and navigate inside it

2. Change the environment variables in the `docker-compose.yml` and `docker-compose-dev.yml`within the `studentnft_api` service (lines 12-13)
    ```
    AUTH0_DOMAIN: "your.domain.auth0.com"
    API_IDENTIFIER: "https://your.domain/yourapi"
    ```

## Build

The development file:

    $ docker-compose -f docker-compose-dev.yml build

The production file:

    $ docker-compose build

## Run

If you only want to run the StudentNFT API in development, run

    $ docker-compose -f docker-compose-dev.yml up

The API UI can be found at http://localhost:8000/v0.1/ui. However, it can not be used because the requests are missing the JWTs.

For production, make sure that the [Api Aggregator](https://github.com/registreerocks/API_aggregator) is running and the `interconnector` network is established. If this is given, you can run

    $ docker-compose up
